# dnsmasq Configuration for DNS-based Allowlist Filtering
# ========================================================

# Don't read /etc/resolv.conf - we specify upstream DNS explicitly
no-resolv

# Upstream DNS servers (used only for allowed domains)
server=8.8.8.8
server=8.8.4.4

# Listen only on localhost
listen-address=127.0.0.1
bind-interfaces

# Don't forward queries without a domain part
domain-needed

# Don't forward reverse lookups for private ranges
bogus-priv

# Cache settings
cache-size=1000

# Include generated allowlist rules
conf-dir=/etc/dnsmasq.d/,*.conf

# DEFAULT: Block all domains by returning 0.0.0.0
# The allowlist rules in /etc/dnsmasq.d/ override this for specific domains
address=/#/0.0.0.0

# Log queries for debugging (uncomment if needed)
# log-queries
# log-facility=/var/log/dnsmasq.log
